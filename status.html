<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Status</title>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --gold-primary: #D4AF37;
            --success: #2ecc71;
            --danger: #e74c3c;
            --glass-surface: rgba(255, 255, 255, 0.03);
            --glass-border: rgba(255, 255, 255, 0.08);
            --bg-deep: #050507;
        }
        body {
            font-family: 'Inter', sans-serif; background: var(--bg-deep); color: white;
            height: 100vh; display: flex; justify-content: center; align-items: center; margin: 0;
            overflow: hidden;
        }
        
        /* Background & Card Styles (Sama seperti login untuk konsistensi) */
        .ambient-glow { position: absolute; width: 100%; height: 100%; z-index: 0; pointer-events: none; }
        .orb { position: absolute; border-radius: 50%; filter: blur(90px); opacity: 0.3; }
        .orb-1 { width: 300px; height: 300px; background: #2ecc71; top: -10%; right: -10%; } /* Hijau untuk status sukses */
        
        .status-card {
            position: relative; z-index: 10; width: 90%; max-width: 380px;
            background: var(--glass-surface); backdrop-filter: blur(40px);
            border: 1px solid var(--glass-border); border-radius: 24px;
            padding: 30px; box-shadow: 0 30px 60px rgba(0,0,0,0.5);
        }

        /* Header */
        .status-header { text-align: center; margin-bottom: 25px; }
        .status-icon {
            width: 60px; height: 60px; margin: 0 auto 15px;
            border: 2px solid var(--success); border-radius: 50%;
            display: flex; justify-content: center; align-items: center;
            font-size: 24px; color: var(--success);
            box-shadow: 0 0 20px rgba(46, 204, 113, 0.3);
            animation: pulseSuccess 2s infinite;
        }
        @keyframes pulseSuccess { 0% { box-shadow: 0 0 0 0 rgba(46,204,113, 0.4); } 70% { box-shadow: 0 0 0 10px rgba(46,204,113, 0); } 100% { box-shadow: 0 0 0 0 rgba(46,204,113, 0); } }
        
        h2 { font-family: 'Cinzel', serif; font-size: 20px; color: var(--success); margin: 0; }
        .user-chip { display: inline-block; padding: 5px 15px; background: rgba(255,255,255,0.05); border-radius: 20px; font-size: 12px; color: #ddd; margin-top: 5px; border: 1px solid var(--glass-border); }

        /* Grid Data */
        .data-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 25px; }
        .data-item {
            background: rgba(0,0,0,0.2); padding: 12px; border-radius: 12px;
            border: 1px solid var(--glass-border);
        }
        .data-item.full { grid-column: span 2; display: flex; justify-content: space-between; align-items: center; }
        .lbl { font-size: 10px; text-transform: uppercase; color: #888; display: block; margin-bottom: 4px; }
        .val { font-size: 13px; font-weight: 600; color: white; }
        .val.gold { color: var(--gold-primary); }

        /* Logout Button */
        .btn-logout {
            width: 100%; padding: 14px; background: transparent;
            border: 1px solid rgba(231, 76, 60, 0.5); color: var(--danger);
            border-radius: 12px; font-weight: 600; cursor: pointer;
            transition: 0.3s;
        }
        .btn-logout:hover { background: var(--danger); color: white; box-shadow: 0 5px 15px rgba(231, 76, 60, 0.3); }

        /* Modal */
        .modal {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.8); z-index: 100; display: none;
            justify-content: center; align-items: center; backdrop-filter: blur(5px);
        }
        .modal-box { background: #151515; padding: 25px; border-radius: 16px; border: 1px solid var(--glass-border); text-align: center; width: 80%; max-width: 300px; }
        .modal-btns { display: flex; gap: 10px; margin-top: 20px; }
        .m-btn { flex: 1; padding: 10px; border-radius: 8px; border: none; font-weight: 600; cursor: pointer; }
        .m-cancel { background: #333; color: white; }
        .m-ok { background: var(--danger); color: white; }

        /* Invisible Mikrotik logic */
        .mikrotik-logic { display: none; }
    </style>
</head>
<body>
    <div class="ambient-glow"><div class="orb orb-1"></div></div>

    <div class="status-card">
        <div class="status-header">
            <div class="status-icon">âœ“</div>
            <h2>CONNECTED</h2>
            <div class="user-chip">$(username)</div>
        </div>

        <div class="data-grid">
            <div class="data-item">
                <span class="lbl">IP Address</span>
                <span class="val">$(ip)</span>
            </div>
            <div class="data-item">
                <span class="lbl">Duration</span>
                <span class="val">$(uptime)</span>
            </div>
            <div class="data-item">
                <span class="lbl">Upload</span>
                <span class="val">$(bytes-in-nice)</span>
            </div>
            <div class="data-item">
                <span class="lbl">Download</span>
                <span class="val">$(bytes-out-nice)</span>
            </div>
            <div class="data-item full" id="row-quota" style="display:none">
                <span class="lbl">Sisa Kuota</span>
                <span class="val gold">$(remain-bytes-total-nice)</span>
            </div>
            <div class="data-item full" id="row-time" style="display:none">
                <span class="lbl">Sisa Waktu</span>
                <span class="val gold">$(session-time-left)</span>
            </div>
        </div>

        <button class="btn-logout" onclick="openModal()">DISCONNECT</button>
        
        <form action="$(link-logout)" name="logout" id="logout-form" style="display: none">
            <input type="hidden" name="erase-cookie" value="on" />
        </form>
    </div>

    <div class="modal" id="modal">
        <div class="modal-box">
            <h3 style="color:white; margin-bottom:5px; font-size:16px;">Konfirmasi</h3>
            <p style="color:#aaa; font-size:12px;">Akhiri sesi internet sekarang?</p>
            <div class="modal-btns">
                <button class="m-btn m-cancel" onclick="closeModal()">Batal</button>
                <button class="m-btn m-ok" onclick="doLogout()">Ya, Keluar</button>
            </div>
        </div>
    </div>

    <div class="mikrotik-logic">
        $(if refresh-timeout)<meta http-equiv="refresh" content="$(refresh-timeout-secs)" />$(endif)
        <div id="check-lim">$(if limit-bytes-total)1$(endif)</div>
        <div id="check-time">$(if session-time-left)1$(endif)</div>
    </div>

    <script>
        const qRow = document.getElementById('row-quota');
        const tRow = document.getElementById('row-time');
        if(document.getElementById('check-lim').innerText.includes('1')) qRow.style.display = 'flex';
        if(document.getElementById('check-time').innerText.includes('1')) tRow.style.display = 'flex';

        function openModal(){ document.getElementById('modal').style.display = 'flex'; }
        function closeModal(){ document.getElementById('modal').style.display = 'none'; }
        function doLogout(){ document.getElementById('logout-form').submit(); }
    </script>
</body>
</html>